const a=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};a();function l(e,t){return window.go.main.App.AddFolowItemHandler(e,t)}function c(){return window.go.main.App.GetItems()}function d(e){return window.go.main.App.SetApiKey(e)}function u(e){return window.go.main.App.UpdateItems(e)}function h(e,t,i){window.runtime.EventsOnMultiple(e,t,i)}function m(e,t){h(e,t,-1)}const f={data(){return{items:[],itemHashNames:{}}},async mounted(){m("onError",e=>{window.M.toast({html:e})}),m("onItemFolowRemove",e=>{const t=document.getElementsByTagName("button").namedItem(e);t.innerText="\u0412\u0456\u0434\u0441\u043B\u0456\u0434\u043A\u043E\u0432\u0443\u0432\u0430\u0442\u0438",t.classList.remove("disabled")}),m("onItemFolowAdd",e=>{const t=document.getElementsByTagName("button").namedItem(e);t.innerText="\u0412\u0456\u0434\u0456\u0441\u0456\u0434\u043A\u043E\u0432\u0443\u0454\u0442\u044C\u0441\u044F",t.classList.add("disabled")})},methods:{async folowItemPrice(e){const t=e.target.parentElement.getElementsByTagName("h5")[0];l(t.textContent,this.itemHashNames[t.textContent])},async updateItemList(){const e=document.getElementById("apikey");if(e.value){const t=await d(e.value);if(t)window.M.toast({html:t});else{this.itemHashNames={},this.items=await c(),this.getCountOfItem();const i=Math.ceil(this.items.length/5)+1,o=[];for(let n=0;n<this.items.length;n+=i){const s=this.items.slice(n,n+i);o.push(s)}this.items=o,u()}}else window.M.toast({html:"\u0410\u043F\u0456 \u043A\u043B\u044E\u0447 \u0432\u0456\u0434\u0441\u0443\u0442\u043D\u0456\u0439"})},getCountOfItem(){this.items.forEach(e=>{const t=e.market_hash_name,i=e.id||e.item_id;if(!this.itemHashNames[t])this.itemHashNames[t]=[i];else{const o=this.items.indexOf(e);o!==-1&&this.items.splice(o,1),this.itemHashNames[t].push(i),console.log(this.itemHashNames)}})}}};Vue.createApp(f).mount("#app");
